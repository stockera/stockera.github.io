<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
	<body>
		<script src="javascript/three.js"></script>
		<script>
		 // global variables
    var renderer;
    var scene;
    var camera;
    var camControls;


    function init() {

        // create a scene, that will hold all our elements such as objects, cameras and lights.
        scene = new THREE.Scene();

        // create a camera, which defines where we're looking at.
        camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 2000);
        camControls = new THREE.TrackballControls(camera);

        // create a render, sets the background color and the size
        renderer = new THREE.WebGLRenderer();
        renderer.setClearColor(0x000000, 1.0);
        renderer.setSize(window.innerWidth, window.innerHeight);

        
        var paramFunction = function (u, v) {

            var x = u
            var y = 0.5*(Math.abs(u)-1-Math.sqrt(1-u^2))
            var z = 0.5*(-Math.abs(u)+1-Math.sqrt(1-u^2))

            return new THREE.Vector3(x, y, z);
        }


        var directionalLight = new THREE.DirectionalLight();
        directionalLight.position.set(-30, 50, 50);
        scene.add(directionalLight);

        var geom = new THREE.ParametricGeometry(paramFunction, 100, 100);
        var mat = new THREE.MeshPhongMaterial({color: 0xcc3333a, side: THREE.DoubleSide, shading: THREE.FlatShading});
        var mesh = new THREE.Mesh(geom, mat);
        mesh.name = 'param';
        mesh.scale.set(4, 4, 4);

        scene.add(mesh);


        // position and point the camera to the center of the scene
        camera.position.x = -50;
        camera.position.y = 150;
        camera.position.z = 250;
        camera.lookAt(new THREE.Vector3(0, 0, 0));


        // add the output of the renderer to the html element
        document.body.appendChild(renderer.domElement);

        // call the render function
        render();
    }

    function render() {
        renderer.render(scene, camera);
        scene.getObjectByName('param').rotation.x += 0.01;
        scene.getObjectByName('param').rotation.y += 0.01;
        requestAnimationFrame(render);
        camControls.update();
    }

    // calls the init function when the window is done loading.
    window.onload = init;
		</script>
	</body>
</html>
